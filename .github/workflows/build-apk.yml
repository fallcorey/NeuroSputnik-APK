name: Build Android APK

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v4
      
    - name: üèóÔ∏è Setup Android SDK
      uses: android-actions/setup-android@v3
      
    - name: üîß Setup Java
      uses: actions/setup-java@v4
      with:
        distribution: 'temurin'
        java-version: '11'
        
    - name: üì¶ Create Project Structure
      run: |
        # –°–æ–∑–¥–∞–µ–º –ø–æ–ª–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É Android –ø—Ä–æ–µ–∫—Ç–∞
        mkdir -p android/app/src/main/assets
        mkdir -p android/app/src/main/java/com/neurosputnik
        mkdir -p android/app/src/main/res/values
        mkdir -p android/app/src/main/res/mipmap-hdpi
        mkdir -p android/app/src/main/res/mipmap-mdpi
        mkdir -p android/app/src/main/res/mipmap-xhdpi
        mkdir -p android/app/src/main/res/mipmap-xxhdpi
        mkdir -p android/app/src/main/res/mipmap-xxxhdpi
        mkdir -p android/gradle/wrapper
        
    - name: üé® Create Android Files
      run: |
        # –°–æ–∑–¥–∞–µ–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã
        
        # MainActivity.java
        cat > android/app/src/main/java/com/neurosputnik/MainActivity.java << 'EOF'
        package com.neurosputnik;
        
        import android.os.Bundle;
        import android.webkit.WebView;
        import android.webkit.WebViewClient;
        import android.webkit.WebSettings;
        import androidx.appcompat.app.AppCompatActivity;
        
        public class MainActivity extends AppCompatActivity {
            private WebView webView;
            
            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                
                webView = new WebView(this);
                WebSettings webSettings = webView.getSettings();
                webSettings.setJavaScriptEnabled(true);
                webSettings.setDomStorageEnabled(true);
                webSettings.setDatabaseEnabled(true);
                webSettings.setAllowFileAccess(true);
                webSettings.setAllowContentAccess(true);
                webSettings.setAllowUniversalAccessFromFileURLs(true);
                webSettings.setAllowFileAccessFromFileURLs(true);
                
                webView.setWebViewClient(new WebViewClient() {
                    @Override
                    public boolean shouldOverrideUrlLoading(WebView view, String url) {
                        view.loadUrl(url);
                        return true;
                    }
                });
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—à–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                webView.loadUrl("file:///android_asset/index.html");
                setContentView(webView);
            }
            
            @Override
            public void onBackPressed() {
                if (webView.canGoBack()) {
                    webView.goBack();
                } else {
                    super.onBackPressed();
                }
            }
        }
        EOF
        
        # AndroidManifest.xml
        cat > android/app/src/main/AndroidManifest.xml << 'EOF'
        <?xml version="1.0" encoding="utf-8"?>
        <manifest xmlns:android="http://schemas.android.com/apk/res/android"
            package="com.neurosputnik">
            
            <uses-permission android:name="android.permission.INTERNET" />
            <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
            <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
            <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
            
            <application
                android:allowBackup="true"
                android:icon="@mipmap/ic_launcher"
                android:label="NeuroSputnik"
                android:theme="@style/AppTheme"
                android:usesCleartextTraffic="true">
                
                <activity
                    android:name=".MainActivity"
                    android:exported="true"
                    android:launchMode="singleTop"
                    android:configChanges="orientation|screenSize"
                    android:windowSoftInputMode="adjustResize">
                    <intent-filter>
                        <action android:name="android.intent.action.MAIN" />
                        <category android:name="android.intent.category.LAUNCHER" />
                    </intent-filter>
                </activity>
            </application>
        </manifest>
        EOF
        
        # strings.xml
        cat > android/app/src/main/res/values/strings.xml << 'EOF'
        <?xml version="1.0" encoding="utf-8"?>
        <resources>
            <string name="app_name">NeuroSputnik</string>
        </resources>
        EOF
        
        # styles.xml
        cat > android/app/src/main/res/values/styles.xml << 'EOF'
        <?xml version="1.0" encoding="utf-8"?>
        <resources>
            <style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
                <item name="colorPrimary">#667eea</item>
                <item name="colorPrimaryDark">#764ba2</item>
                <item name="colorAccent">#4ECDC4</item>
            </style>
        </resources>
        EOF
        
    - name: üì± Create Web App
      run: |
        # –°–æ–∑–¥–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        cat > android/app/src/main/assets/index.html << 'EOF'
        <!DOCTYPE html>
        <html lang="ru">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>NeuroSputnik</title>
            <style>
                * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                }
                
                body {
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    height: 100vh;
                    overflow: hidden;
                }
                
                .app-container {
                    height: 100vh;
                    display: flex;
                    flex-direction: column;
                }
                
                .header {
                    text-align: center;
                    padding: 25px 20px;
                    background: rgba(0, 0, 0, 0.3);
                    backdrop-filter: blur(10px);
                }
                
                .header h1 {
                    font-size: 1.8em;
                    margin-bottom: 5px;
                }
                
                .header p {
                    opacity: 0.9;
                    font-size: 1em;
                }
                
                .status-bar {
                    display: flex;
                    justify-content: space-between;
                    padding: 10px 20px;
                    background: rgba(0, 0, 0, 0.2);
                    font-size: 0.9em;
                    border-bottom: 1px solid rgba(255,255,255,0.1);
                }
                
                .messages {
                    flex: 1;
                    padding: 20px;
                    overflow-y: auto;
                    display: flex;
                    flex-direction: column;
                    gap: 15px;
                }
                
                .message {
                    max-width: 85%;
                    padding: 15px 20px;
                    border-radius: 25px;
                    font-size: 1em;
                    line-height: 1.4;
                    word-wrap: break-word;
                }
                
                .user-message {
                    align-self: flex-end;
                    background: linear-gradient(45deg, #667eea, #764ba2);
                    color: white;
                }
                
                .ai-message {
                    align-self: flex-start;
                    background: rgba(255, 255, 255, 0.15);
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                }
                
                .input-area {
                    padding: 20px;
                    background: rgba(0, 0, 0, 0.3);
                    display: flex;
                    gap: 12px;
                    align-items: center;
                    border-top: 1px solid rgba(255,255,255,0.1);
                }
                
                #messageInput {
                    flex: 1;
                    padding: 15px 20px;
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.3);
                    border-radius: 25px;
                    color: white;
                    font-size: 16px;
                    outline: none;
                }
                
                #messageInput::placeholder {
                    color: rgba(255, 255, 255, 0.6);
                }
                
                .send-btn {
                    padding: 15px 25px;
                    background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
                    border: none;
                    border-radius: 25px;
                    color: white;
                    font-weight: bold;
                    cursor: pointer;
                    min-width: 60px;
                    transition: transform 0.2s ease;
                }
                
                .send-btn:active {
                    transform: scale(0.95);
                }
                
                .send-btn:disabled {
                    opacity: 0.5;
                    cursor: not-allowed;
                }
                
                .typing-indicator {
                    align-self: flex-start;
                    background: rgba(255, 255, 255, 0.1);
                    padding: 12px 20px;
                    border-radius: 25px;
                    font-style: italic;
                    opacity: 0.7;
                }
                
                @media (max-width: 480px) {
                    .message {
                        max-width: 90%;
                        font-size: 0.95em;
                    }
                    
                    .header h1 {
                        font-size: 1.5em;
                    }
                }
            </style>
        </head>
        <body>
            <div class="app-container">
                <div class="header">
                    <h1>üß† NeuroSputnik</h1>
                    <p>–û—Ñ—Ñ–ª–∞–π–Ω AI –ø–æ–º–æ—â–Ω–∏–∫ —Å —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏–µ–º</p>
                </div>
                
                <div class="status-bar">
                    <span>üü¢ AI –∞–∫—Ç–∏–≤–µ–Ω</span>
                    <span>üì± –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º</span>
                    <span>üöÄ v1.0</span>
                </div>
                
                <div class="messages" id="messages">
                    <div class="message ai-message">
                        <strong>NeuroSputnik:</strong> –ü—Ä–∏–≤–µ—Ç! üöÄ –Ø –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ—Ñ–ª–∞–π–Ω AI –ø–æ–º–æ—â–Ω–∏–∫. –†–∞–±–æ—Ç–∞—é –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏ –º–æ–≥—É —Å–∞–º–æ–æ–±—É—á–∞—Ç—å—Å—è! –ó–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–∏ —Å—ã–≥—Ä–∞—Ç—å –≤ –æ–±—É—á–∞—é—â–∏–µ –∏–≥—Ä—ã!
                    </div>
                </div>
                
                <div class="input-area">
                    <input type="text" id="messageInput" placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ '–∏–≥—Ä—ã'..." autocomplete="off">
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">‚û§</button>
                </div>
            </div>

            <script>
                class NeuroSputnikAI {
                    constructor() {
                        this.conversationHistory = [];
                        this.loadConversationHistory();
                    }
                    
                    loadConversationHistory() {
                        try {
                            const saved = localStorage.getItem('neuro_conversation');
                            if (saved) {
                                this.conversationHistory = JSON.parse(saved);
                            }
                        } catch (e) {
                            console.log('–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏');
                        }
                    }
                    
                    saveConversationHistory() {
                        try {
                            localStorage.setItem('neuro_conversation', JSON.stringify(this.conversationHistory));
                        } catch (e) {
                            console.log('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é');
                        }
                    }
                    
                    async generateResponse(userMessage) {
                        // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ AI
                        await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 1200));
                        
                        const lowerMessage = userMessage.toLowerCase();
                        
                        // –£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
                        if (lowerMessage.includes('–ø—Ä–∏–≤–µ—Ç') || lowerMessage.includes('–∑–¥—Ä–∞–≤—Å—Ç–≤')) {
                            return '–ü—Ä–∏–≤–µ—Ç! üéâ –†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å! –Ø NeuroSputnik - –æ—Ñ—Ñ–ª–∞–π–Ω AI, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –ø—Ä—è–º–æ –Ω–∞ —Ç–≤–æ—ë–º —Ç–µ–ª–µ—Ñ–æ–Ω–µ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞!';
                        }
                        
                        if (lowerMessage.includes('–∫–∞–∫ –¥–µ–ª–∞') || lowerMessage.includes('–∫–∞–∫ —Ç—ã')) {
                            return '–û—Ç–ª–∏—á–Ω–æ! –ì–æ—Ç–æ–≤ –∫ –æ–±—â–µ–Ω–∏—é –∏ –æ–±—É—á–µ–Ω–∏—é. –° –∫–∞–∂–¥—ã–º —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–º —è —Å—Ç–∞–Ω–æ–≤–ª—é—Å—å —É–º–Ω–µ–µ! üìö';
                        }
                        
                        if (lowerMessage.includes('–æ—Ñ—Ñ–ª–∞–π–Ω') || lowerMessage.includes('–∏–Ω—Ç–µ—Ä–Ω–µ—Ç')) {
                            return '–î–∞! –Ø —Ä–∞–±–æ—Ç–∞—é –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ—Ñ–ª–∞–π–Ω. –í—Å–µ AI –º–æ–¥–µ–ª–∏ –∏ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ. –ù–∏–∫–∞–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤! üîí';
                        }
                        
                        if (lowerMessage.includes('–∏–≥—Ä—ã') || lowerMessage.includes('–∏–≥—Ä–∞')) {
                            return `üéÆ <strong>–û–±—É—á–∞—é—â–∏–µ –∏–≥—Ä—ã:</strong>

‚Ä¢ <strong>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ø–∞–º—è—Ç–∏</strong> - –ø–æ–º–æ–≥–∏ –º–Ω–µ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –ª—É—á—à–µ
‚Ä¢ <strong>–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏</strong> - —Ä–∞–∑–≤–∏–≤–∞–π –º–æ—ë –º—ã—à–ª–µ–Ω–∏–µ  
‚Ä¢ <strong>–í–∏–∫—Ç–æ—Ä–∏–Ω–∞</strong> - –ø—Ä–æ–≤–µ—Ä—å –º–æ–∏ –∑–Ω–∞–Ω–∏—è
‚Ä¢ <strong>–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</strong> - –æ–±—É—á–∞–π –º–µ–Ω—è –∫–æ–¥–∏—Ç—å

–ò–≥—Ä—ã –ø–æ–º–æ–≥–∞—é—Ç –º–Ω–µ —Å–∞–º–æ–æ–±—É—á–∞—Ç—å—Å—è! –ö–∞–∫–∞—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?`;
                        }
                        
                        if (lowerMessage.includes('–æ–±—É—á') || lowerMessage.includes('—É—á–∏')) {
                            return `üìö <strong>–°–∞–º–æ–æ–±—É—á–µ–Ω–∏–µ NeuroSputnik:</strong>

–Ø —É—á—É—Å—å –Ω–∞:
‚Ä¢ –ù–∞—à–∏—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–∞—Ö
‚Ä¢ –¢–≤–æ–∏—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö –∏ feedback
‚Ä¢ –ò–≥—Ä–æ–≤—ã—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è—Ö
‚Ä¢ –ê–Ω–∞–ª–∏–∑–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

–ß–µ–º –±–æ–ª—å—à–µ –º—ã –æ–±—â–∞–µ–º—Å—è - —Ç–µ–º —É–º–Ω–µ–µ —è —Å—Ç–∞–Ω–æ–≤–ª—é—Å—å! üß†`;
                        }
                        
                        if (lowerMessage.includes('–∫–æ–¥') || lowerMessage.includes('–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä')) {
                            return `üíª <strong>–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong>

–ú–æ–≥—É –ø–æ–º–æ—á—å —Å:
‚Ä¢ Python, JavaScript, Java
‚Ä¢ –ê–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ –í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π
‚Ä¢ –†–µ—à–µ–Ω–∏–µ–º coding problems

–ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–µ–±—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?`;
                        }
                        
                        if (lowerMessage.includes('–ø–æ–≥–æ–¥') || lowerMessage.includes('–≤—Ä–µ–º–µ–Ω')) {
                            return '‚õÖ –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è –æ—Ñ—Ñ–ª–∞–π–Ω –∏ –Ω–µ –º–æ–≥—É –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ. –ù–æ –º–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –∫–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–æ–Ω–∞—Ö –∏–ª–∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã—Ö —è–≤–ª–µ–Ω–∏—è—Ö!';
                        }
                        
                        // –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
                        if (lowerMessage.includes('–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω') || lowerMessage.includes('ai') || lowerMessage.includes('–Ω–µ–π—Ä–æ—Å–µ—Ç')) {
                            return `ü§ñ <strong>–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç:</strong>

–Ø —Ä–∞–±–æ—Ç–∞—é –Ω–∞ –æ—Å–Ω–æ–≤–µ:
‚Ä¢ –õ–æ–∫–∞–ª—å–Ω—ã—Ö AI –º–æ–¥–µ–ª–µ–π
‚Ä¢ –ú–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
‚Ä¢ –°–∞–º–æ–æ–±—É—á–∞—é—â–∏—Ö—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤

–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω –Ω–∞ —Ç–≤–æ—ë–º Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ!`;
                        }
                        
                        // –û–±—â–∏–π —É–º–Ω—ã–π –æ—Ç–≤–µ—Ç
                        return `ü§î <strong>"${userMessage}"</strong> - –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å!

–ö–∞–∫ –æ—Ñ—Ñ–ª–∞–π–Ω AI —è –º–æ–≥—É:
‚Ä¢ –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã
‚Ä¢ –ü–æ–º–æ–≥–∞—Ç—å —Å –æ–±—É—á–µ–Ω–∏–µ–º
‚Ä¢ –û–±—ä—è—Å–Ω—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Ç–µ–º—ã
‚Ä¢ –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∏–¥–µ–∏ –∏ —Ä–µ—à–µ–Ω–∏—è
‚Ä¢ –ò–≥—Ä–∞—Ç—å –≤ –æ–±—É—á–∞—é—â–∏–µ –∏–≥—Ä—ã

–ü–æ–ø—Ä–æ–±—É–π –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –ø–æ-–¥—Ä—É–≥–æ–º—É –∏–ª–∏ —Å–ø—Ä–æ—Å–∏ –æ –º–æ–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö! üí´`;
                    }
                    
                    addToHistory(userMessage, aiResponse) {
                        this.conversationHistory.push({
                            user: userMessage,
                            ai: aiResponse,
                            timestamp: Date.now()
                        });
                        
                        // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é 50 —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
                        if (this.conversationHistory.length > 50) {
                            this.conversationHistory = this.conversationHistory.slice(-50);
                        }
                        
                        this.saveConversationHistory();
                    }
                }

                // –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä AI
                const ai = new NeuroSputnikAI();
                
                function sendMessage() {
                    const input = document.getElementById('messageInput');
                    const message = input.value.trim();
                    
                    if (!message) return;
                    
                    // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
                    const sendBtn = document.getElementById('sendBtn');
                    sendBtn.disabled = true;
                    sendBtn.textContent = '...';
                    
                    // –û—á–∏—â–∞–µ–º input
                    input.value = '';
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    addMessage(message, 'user');
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ø–µ—á–∞—Ç–∞–µ—Ç"
                    showTypingIndicator();
                    
                    // –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç AI
                    ai.generateResponse(message).then(response => {
                        removeTypingIndicator();
                        addMessage(response, 'ai');
                        ai.addToHistory(message, response);
                        
                        // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
                        sendBtn.disabled = false;
                        sendBtn.textContent = '‚û§';
                    });
                }
                
                function addMessage(text, type) {
                    const messagesDiv = document.getElementById('messages');
                    const messageDiv = document.createElement('div');
                    
                    messageDiv.className = `message ${type}-message`;
                    messageDiv.innerHTML = type === 'user' 
                        ? text 
                        : `<strong>NeuroSputnik:</strong> ${text}`;
                    
                    messagesDiv.appendChild(messageDiv);
                    messagesDiv.scrollTop = messagesDiv.scrollHeight;
                }
                
                function showTypingIndicator() {
                    const messagesDiv = document.getElementById('messages');
                    const typingDiv = document.createElement('div');
                    typingDiv.className = 'typing-indicator';
                    typingDiv.id = 'typingIndicator';
                    typingDiv.textContent = 'NeuroSputnik –ø–µ—á–∞—Ç–∞–µ—Ç...';
                    messagesDiv.appendChild(typingDiv);
                    messagesDiv.scrollTop = messagesDiv.scrollHeight;
                }
                
                function removeTypingIndicator() {
                    const typingDiv = document.getElementById('typingIndicator');
                    if (typingDiv) {
                        typingDiv.remove();
                    }
                }
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter
                document.getElementById('messageInput').addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });
                
                // –§–æ–∫—É—Å –Ω–∞ input –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
                document.addEventListener('DOMContentLoaded', function() {
                    document.getElementById('messageInput').focus();
                });
            </script>
        </body>
        </html>
        EOF
        
    - name: üõ†Ô∏è Create Build Files
      run: |
        # build.gradle (project)
        cat > android/build.gradle << 'EOF'
        buildscript {
            repositories {
                google()
                mavenCentral()
            }
            dependencies {
                classpath 'com.android.tools.build:gradle:7.4.2'
            }
        }
        
        allprojects {
            repositories {
                google()
                mavenCentral()
            }
        }
        
        task clean(type: Delete) {
            delete rootProject.buildDir
        }
        EOF
        
        # build.gradle (app)
        cat > android/app/build.gradle << 'EOF'
        apply plugin: 'com.android.application'
        
        android {
            compileSdk 33
            buildToolsVersion "33.0.0"
            
            defaultConfig {
                applicationId "com.neurosputnik"
                minSdk 21
                targetSdk 33
                versionCode 1
                versionName "1.0"
            }
            
            signingConfigs {
                debug {
                    storeFile file('debug.keystore')
                    storePassword 'android'
                    keyAlias 'androiddebugkey'
                    keyPassword 'android'
                }
            }
            
            buildTypes {
                debug {
                    signingConfig signingConfigs.debug
                    debuggable true
                }
                release {
                    signingConfig signingConfigs.debug
                    minifyEnabled true
                    proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
                }
            }
            
            compileOptions {
                sourceCompatibility JavaVersion.VERSION_1_8
                targetCompatibility JavaVersion.VERSION_1_8
            }
        }
        
        dependencies {
            implementation 'androidx.appcompat:appcompat:1.6.1'
            implementation 'androidx.webkit:webkit:1.7.0'
            implementation 'com.google.android.material:material:1.9.0'
        }
        EOF
        
        # gradle wrapper
        cat > android/gradle/wrapper/gradle-wrapper.properties << 'EOF'
        distributionBase=GRADLE_USER_HOME
        distributionPath=wrapper/dists
        distributionUrl=https\://services.gradle.org/distributions/gradle-7.5-all.zip
        zipStoreBase=GRADLE_USER_HOME
        zipStorePath=wrapper.dists
        EOF
        
        # gradlew
        cat > android/gradlew << 'EOF'
        #!/bin/sh
        # NOTE: This file is generated by Android Studio
        # This is a fallback for systems without gradle installed
        echo "Using system gradle wrapper"
        exec gradle "$@"
        EOF
        chmod +x android/gradlew
        
    - name: üîë Create Debug Keystore
      run: |
        cd android/app
        keytool -genkey -v -keystore debug.keystore -storepass android -alias androiddebugkey -keypass android -keyalg RSA -keysize 2048 -validity 10000 -dname "CN=Android Debug,O=Android,C=US"
        
    - name: üèóÔ∏è Build APK
      run: |
        cd android
        ./gradlew assembleDebug --no-daemon
        
    - name: üì¶ Upload APK Artifact
      uses: actions/upload-artifact@v4
      with:
        name: neurospuntik-apk
        path: android/app/build/outputs/apk/debug/app-debug.apk
        retention-days: 30
        
    - name: ‚úÖ Create Release
      if: success()
      run: |
        echo "üéâ APK —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω!"
        echo "üì± –§–∞–π–ª: app-debug.apk"
        echo "üì¶ –†–∞–∑–º–µ—Ä: $(du -h android/app/build/outputs/apk/debug/app-debug.apk | cut -f1)"
